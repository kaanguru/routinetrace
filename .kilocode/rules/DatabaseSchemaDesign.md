## Database Schema Design:

### PostgreSQL Definition of **tasks** table:

```sql
create table public.tasks (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  title character varying not null,
  notes text null,
  user_id uuid not null default auth.uid (),
  updated_at timestamp with time zone null,
  is_complete boolean not null default false,
  position smallint null,
  repeat_on_wk days_of_week[] null,
  repeat_frequency smallint null,
  repeat_period public.repeat_period null,
  constraint tasks_pkey primary key (id),
  constraint tasks_user_id_fkey foreign KEY (user_id) references auth.users (id) on update CASCADE on delete CASCADE
) TABLESPACE pg_default;

create index IF not exists idx_tasks_repeat_on_wk on public.tasks using gin (repeat_on_wk) TABLESPACE pg_default;
```

### PostgreSQL Definition of **checklistitems** table:

```sql
create table public.checklistitems (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  content character varying not null,
  updated_at timestamp with time zone null,
  position smallint null,
  is_complete boolean not null default false,
  task_id bigint not null,
  constraint checklistitems_pkey primary key (id),
  constraint checklistitems_task_id_fkey foreign KEY (task_id) references tasks (id) on update CASCADE on delete CASCADE
) TABLESPACE pg_default;

create index IF not exists idx_checklistitems_task_id on public.checklistitems using btree (task_id) TABLESPACE pg_default;
```

### PostgreSQL Definition of **health_and_happiness** table:

```sql
create table public.health_and_happiness (
  id smallint generated by default as identity not null,
  health smallint null default '100'::smallint,
  happiness smallint null default '100'::smallint,
  user_id uuid not null default auth.uid (),
  updated_at timestamp with time zone null default now(),
  constraint health_and_happiness_pkey primary key (id),
  constraint unique_user unique (user_id),
  constraint health_and_happiness_user_id_fkey foreign KEY (user_id) references auth.users (id) on update CASCADE on delete CASCADE
) TABLESPACE pg_default;
```

### PostgreSQL Definition of **public.task_completion_history** table:

```sql
create table public.task_completion_history (
  id bigint generated by default as identity not null,
  task_id bigint not null,
  completed_at timestamp with time zone not null default now(),
  constraint task_completion_history_pkey primary key (id),
  constraint task_completion_history_task_id_fkey foreign KEY (task_id) references tasks (id) on update CASCADE on delete CASCADE
) TABLESPACE pg_default;

create index IF not exists idx_task_completion_history_task_id on public.task_completion_history using btree (task_id) TABLESPACE pg_default;
```

### Database Enumerated Types

- days_of_week: Mon, Tue, Wed, Thu, Fri, Sat, Sun

- repeat_period: Daily, Weekly, Monthly, Yearly

